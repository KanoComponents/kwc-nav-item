<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-icon/iron-icon.html">
<link rel="import" href="../web-components/kano-icons/kano-icons.html">
<link rel="import" href="../web-components/kano-style/kano-style.html">

<!--
`kwc-nav-item`
Display a tab item in the `kwc-nav`

@demo demo/index.html
-->

<dom-module id="kwc-nav-item">
    <template>
        <style>
            :host {
                display: inline-block;
            }
            .nav-item ::slotted(*) {
                text-decoration: inherit;
                font-family: inherit;
                font-size: inherit;
                color: inherit;
                background: inherit;
                border: inherit;
                outline: inherit;
                text-transform: inherit;
                font-weight: inherit;
                margin: 0;
                padding: 0;
                cursor: pointer;
            }
            .nav-item {
                @apply --font-body;
                margin: 0 16px;
                padding: 8px 16px;
                position: relative;
                font-family: var(--font-body);
                font-size: 14px;
                font-weight: bold;
                text-transform: uppercase;
                white-space: nowrap;
                border: 0;
                border-radius: 4px;
                cursor: pointer;
                background: transparent;
            }
            .nav-item:focus {
                outline: 0;
            }
            .nav-item .icon {
                width: 16px;
                height: 16px;
                margin-right: 8px;
            }
            .nav-item.deselected {
                color: var(--color-grey);
            }
            .nav-item.deselected:hover {
                color: var(--color-stone);
            }
            .nav-item.selected {
                color: var(--color-white);
            }
            .nav-item.selected .icon {
                color: var(--color-kano-orange);
            }
        </style>
        <div class$="nav-item [[_activeClass]]">
            <dom-if>
                <template is="dom-if" if="[[_hasIcon]]">
                    <iron-icon class="icon" icon="kano-icons:[[iconId]]"></iron-icon>
                </template>
            </dom-if>
            <slot></slot>
        </div>
    </template>
    <script>
        Polymer({
            is: 'kwc-nav-item',
            properties: {
                /**
                 * List of classes of host element. Without being a property
                 * the element can't watch for changes and won't be able to
                 * check if the `selectedClass` is contained.
                 * @type {String}
                 */
                class: {
                    type: String,
                    reflectToAttribute: true
                },
                /**
                 * CSS class name that the host should have to indicate wether
                 * this component is selected or not.
                 * @type {String}
                 */
                selectedClass: {
                    type: String,
                    value: 'iron-selected'
                },
                /**
                 * Icon id from `kano-icons`
                 * @type {String}
                 */
                iconId: {
                    type: String,
                    value: null
                },
                /**
                 * Flags if navigation has icon or not
                 * @type {Boolean}
                 */
                _hasIcon: {
                    type: Boolean,
                    computed: '_computeHasIcon(iconId)'
                },
                /**
                 * Class to be appended on navigation item if it's active
                 * @type {String}
                 */
                _activeClass: {
                    type: String,
                    computed: '_computeActiveClass(class)'
                }
            },
            /**
             * Computes if navigation item has an icon or not.
             * @param {String} iconId Icon id from `kano-icons`.
             * @return {Boolean} Flag if navigation icon has icon or not.
             */
            _computeHasIcon (iconId) {
                return iconId ? true : false;
            },
            /**
             * Computes class to use if navigation item is active or not.
             * @param {String} active Wether navigation is active or not.
             * @return {String} Class to be used if navigation icon is selected
             *     or not.
             */
            _computeActiveClass () {
                let isSelected = this.classList.contains(
                    this.selectedClass
                );
                return isSelected === true ? 'selected' : 'deselected';
            }
        });
    </script>
</dom-module>
